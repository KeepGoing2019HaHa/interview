import random
import matplotlib.pyplot as plt

def fit(points):
    k = random.random()
    b = random.random()
    iteration = 1000
    lr = 0.001

    for _ in range(iteration):
        for x, y in points:
            diff = (k * x + b) - y
            loss = diff * diff

            k -= lr * 2 * x * diff
            b -= lr * 2 * diff

    return k, b

points = [(13.686740330106613, 41.6908174895636), (6.742196714558634, 17.810333126073004), (1.556006971649233, -0.9287354172163509), (13.080190282092342, 39.37526009896912), (9.17170801181035, 26.260178929998016), (2.2739774670709045, 1.3981530627775967), (15.916339655004744, 49.88606102186393), (12.765545774588052, 39.4538274632451), (19.32439255887417, 62.1948144398406), (19.944213019902637, 63.174532005784584), (11.167051310809978, 34.0371794055399), (17.303597478451714, 53.57654192199414), (15.017792215729163, 46.63121419898418), (3.2575844396404086, 5.867813648498133), (9.31506513563749, 27.503636482482005), (10.083297949781167, 29.953302125711772), (0.8447018614105217, -2.180119333364927), (13.72124354273293, 41.89416309845536), (7.020846504585643, 18.721505102881768), (14.595100619969912, 44.58157545509966), (17.686045190341385, 56.27435827094264), (16.512539498774924, 52.595431677285085), (12.62566465970374, 38.424614179269916), (1.0840919578899721, -1.256100118426546), (7.928566112066049, 22.620712468398192), (18.43638015695505, 57.61824658848492), (17.10516475767638, 54.51929996445815), (18.775178028548154, 59.48072068431504), (4.9505957881008955, 10.943952213092853), (5.160919229232432, 12.733114930457042)]
k, b = fit(points)
print(k, b)
xs = [s[0] for s in points]
ys = [s[1] for s in points]
predict_y = [k * x + b for x in xs]
plt.plot(xs, ys, 'ro')
plt.plot(xs, predict_y, 'b-')
plt.show()